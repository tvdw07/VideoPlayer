{% extends "base.html" %}
{% block content %}

<h4>ğŸ“ {{ current or "media" }}</h4>

<ul class="list-group">

  {% if current %}
  <li class="list-group-item">
    <a href="{{ url_for('browse.browse', rel_path=parent) }}">â¬…ï¸ ZurÃ¼ck</a>
  </li>
  {% endif %}

  {% for item in items %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <div>
        {% if item.is_dir %}
          ğŸ“ <a href="/browse/{{ item.path }}">{{ item.name }}</a>
        {% elif item.is_video %}
          â–¶ï¸ <a href="/watch/{{ item.path }}">{{ item.name }}</a>
        {% else %}
          ğŸ“„ {{ item.name }}
        {% endif %}
      </div>

      {% if item.is_video and item.form %}
        <form method="post" action="{{ url_for('browse.delete_video') }}" onsubmit="return confirm('Video lÃ¶schen? Dies kann nicht rÃ¼ckgÃ¤ngig gemacht werden.');">
          {{ item.form.hidden_tag() }}
          {{ item.form.video_path }}
          <button type="submit" class="btn btn-sm btn-outline-danger">LÃ¶schen</button>
        </form>
      {% endif %}

    </li>
  {% endfor %}

</ul>

{% if pagination and pagination.pages > 1 %}
  <div class="d-flex justify-content-between align-items-center mt-3">
    <div class="small text-secondary">
      Seite {{ pagination.page }} / {{ pagination.pages }} â€¢ {{ pagination.total }} EintrÃ¤ge
    </div>

    <nav aria-label="Pagination">
      <ul class="pagination pagination-sm mb-0">
        <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
          {% if pagination.has_prev %}
            <a class="page-link" href="{{ url_for('browse.browse', rel_path=current, page=pagination.prev_page) }}">â†</a>
          {% else %}
            <span class="page-link">â†</span>
          {% endif %}
        </li>

        <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
          {% if pagination.has_next %}
            <a class="page-link" href="{{ url_for('browse.browse', rel_path=current, page=pagination.next_page) }}">â†’</a>
          {% else %}
            <span class="page-link">â†’</span>
          {% endif %}
        </li>
      </ul>
    </nav>
  </div>
{% endif %}

{% endblock %}
